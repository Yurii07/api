<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Course work</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./style.css">

</head>
<body>

<div class="container-fluid">

    <div class="row">
        <h1>Get current weather</h1>
        <div class="col-sm-12">
            <form class="form-inline text-center first-child" role="form" id="searchform" action="#"
                  method="get">
                <div class="form-group">
                    <label class="sr-only" for="help-search">Search</label>

                    <input class="form-control border-color col-sm-12" id="search_str" name="q" value="London, UK"
                           onfocus="this.value = (this.value=='London, UK')? '' : this.value;" placeholder="Search">

                </div>
                <button type="submit" class="btn btn-info" id="send"><i class="glyphicon glyphicon-search"></i> Search</button>

            </form>

        </div>
    </div>

    <div class="row" id='error'>
        <div class="col-sm-12">
            <div class="tab-pane active" id="forecast-list">
                <div id="forecast_list_ul">

                    <table class="table " style="display: none">
                        <tbody>
                        <tr>
                            <td><img src="http://openweathermap.org/img/w/04d.png" id="weatherImg"></td>
                            <td><b><a href="/city/2643743" id="cityName"> London, GB</a></b>
                                <img src="http://openweathermap.org/images/flags/gb.png" id="flags"><b><i id="desc"> broken
                                    clouds</i></b>
                                <p><span class="badge badge-info">20.6°С </span> temperature from 20 to 21 °С, wind 2.6 m/s.
                                    clouds 56 %, 1021 hpa</p>
                                <p>Geo coords <a href="/weathermap?zoom=12&amp;lat=51.5085&amp;lon=-0.1258">[51.5085,
                                    -0.1258]</a></p></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="current-wrap" style="">
        <div class="div" id="response">

        </div>
    </div>

    <div class="navbar-fixed-bottom" id="footer" >
        <div id="map"></div>
    </div>
</div>


<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>




    // document.addEventListener('DOMContentLoaded', function () {
    // });



//    // GoogleMaps JavaScript API key

</script>
<script>
    // Note: This example requires that you consent to location sharing when
    // prompted by your browser. If you see the error "The Geolocation service
    // failed.", it means you probably did not give permission for the browser to
    // locate you.
    var map, infoWindow;

    function initMap(long = 150.644, lati = -34.397) {
        // if (typeof (map) == 'undefined')
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: lati, lng: long},
                zoom: 6
            });
        console.log(long, lati);
        infoWindow = new google.maps.InfoWindow;

        // Try HTML5 geolocation.
        var pos = {
            lat: lati,
            lng: long
        };
        // var coordLon = respJSON.coord.lon;
        // var coordLat = respJSON.coord.lat;
        console.log('test');
        infoWindow.setPosition(pos);
        infoWindow.setContent('Location found.');
        infoWindow.open(map);
        map.setCenter(pos);
    }

    // function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    //     infoWindow.setPosition(pos);
    //
    //     infoWindow.setContent(browserHasGeolocation ?
    //         'Error: The Geolocation service failed.' :
    //         'Error: Your browser doesn\'t support geolocation.');
    //     infoWindow.open(map);
    // }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAFI8iRuIhAgkxFX-s4yNsqxjjefyW-wng">
</script>

<script src="./dist/main.js"></script>

</body>
</html>

